# Sansa Learn Student Management System

## Project Overview
A complete full-stack web application for student data management and monthly fee tracking for Sansa Learn coaching institute. Built with Python Flask, SQLite database, and responsive Bootstrap UI.

## Purpose
Manage student records, track monthly fee payments, generate PDF receipts and demand bills with institute branding.

## Tech Stack
- Backend: Python 3.11 + Flask
- Database: SQLite3
- PDF Generation: ReportLab
- Image Processing: Pillow
- Frontend: Bootstrap 5, HTML/CSS/JS

## Project Structure
```
/
├── app.py                 # Main Flask application
├── database.db           # SQLite database (auto-created)
├── static/
│   ├── css/
│   │   └── style.css     # Custom styles
│   ├── js/              # JavaScript files
│   └── logo/
│       └── logo.png     # Sansa Learn logo
├── templates/           # HTML templates
│   ├── base.html       # Base template
│   ├── dashboard.html  # Main dashboard
│   ├── students.html   # Student list
│   ├── add_student.html
│   ├── edit_student.html
│   ├── view_student.html
│   ├── fee_management.html
│   └── student_fees.html
├── uploads/            # Student photos
└── pdfs/              # Generated PDF receipts

```

## Key Features
1. **Password-Protected Access** - Secure login system with MANAGER_PASSWORD
2. Complete CRUD for student records
3. Monthly fee tracking with paid/unpaid status
4. PDF receipt generation with institute branding
5. PDF demand bill for unpaid fees
6. Search by admission number, name, or father name
7. CSV export for students and fees
8. Mobile-responsive UI
9. Auto-generated admission numbers
10. **WhatsApp Integration** - One-click message sending to parents
11. **Public PDF Links** - Parents can download PDFs without login (token-secured)
12. **Registration Success Page** - Premium WhatsApp message with student profile PDF
13. **Device Session Management** - View all logged-in devices, remotely logout any device
14. **Backup & Restore** - Full data backup to ZIP file; download and restore anytime

## Database Schema
- **students**: id, admission_number, photo_path, name, father_name, mother_name, dob, gender, class, board, medium, school_name, address, mobile1, mobile2, fee_per_month, discount, admission_date, other_details
- **fees**: id, student_id, month, year, fee_amount, is_paid, payment_date, payment_mode, remarks
- **institute_info**: id, logo_path, address, contact, signature_path
- **manager_sessions**: id, session_id, ip_address, user_agent, device_name, os, browser, is_active, created_at, last_seen_at

## Security
- **Password Authentication**: All pages require login with ADMIN_PASSWORD
- **Session Management**: Secure session handling with SESSION_SECRET
- **Protected Routes**: All routes protected except login/logout
- **Logout Functionality**: Secure logout clears session

## Required Secrets (in Replit Secrets)
- **ADMIN_PASSWORD**: Manager password for accessing the application
- **SESSION_SECRET**: Flask session encryption key (auto-generated by Replit)

## Recent Changes
- 2025-12-02: Added Backup & Restore feature - create ZIP backups of all data, download them, and restore anytime
- 2025-12-02: Added Device Session Management feature - view all logged-in devices and remotely logout any device
- 2025-12-02: Updated signature image for PDFs
- 2025-11-25: Initial project creation with complete student management and fee tracking system
- 2025-11-25: Added password authentication system for secure access
- Integrated Sansa Learn logo (golden tree design) throughout the application
- Implemented PDF generation for receipts and demand bills

## User Preferences
- Single admin user (coaching institute owner)
- Simple, clean, mobile-friendly UI
- All data stored locally in SQLite

## Running the Application
The app runs on port 5000. Access via the Replit webview.

**First Time Setup:**
1. Set ADMIN_PASSWORD in Replit Secrets (already configured)
2. Open the application - you will be redirected to login page
3. Enter your ADMIN_PASSWORD to access the system

**Available Routes (all require authentication):**
- / - Dashboard with statistics
- /students - View all students
- /student/add - Add new student
- /student/{id}/registration-success - Registration success with WhatsApp button
- /fees - Fee management
- /backup - Backup & restore data management
- /sessions - Device session management (view/revoke active logins)
- /logout - Logout from system

**Public Routes (no login required - for parents):**
- /public/profile/{admission_no}/{token} - Download student profile PDF
- /public/demand/{admission_no}/{token} - Download demand bill PDF
- /public/receipt/{admission_no}/{fee_id}/{token} - Download fee receipt PDF

## Institute Branding
- Name: Sansa Learn
- Logo: Golden tree design with books
- Address: Chandmari Road Kankarbagh gali no. 06 ke thik saamne
- Contact: 9296820840, 9153021229
